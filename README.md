# üè¢ ParcInfo - Gestion de Parc Informatique

## üìã Vue d'Ensemble

**ParcInfo** est une application web compl√®te de gestion de parc informatique d√©velopp√©e avec Django, React et Streamlit. Elle utilise une architecture hybride Kubernetes + Docker pour une performance optimale et une scalabilit√© maximale.

## ‚ú® Fonctionnalit√©s Principales

### üîß Gestion des √âquipements
- **Mat√©riel Informatique** : Ordinateurs, serveurs, p√©riph√©riques
- **Mat√©riel de Bureau** : Mobilier, accessoires
- **Suivi d'Inventaire** : Codes d'inventaire, statuts, affectations
- **D√©charges Num√©riques** : Signatures √©lectroniques avec PDF

### üìù Gestion des Demandes
- **Demandes d'√âquipement** : Cr√©ation, suivi, approbation
- **Workflow d'Approbation** : Hi√©rarchie des validations
- **Signatures √âlectroniques** : D√©charges num√©riques
- **Notifications Automatiques** : Syst√®me de notifications en temps r√©el

### üõí Gestion des Commandes
- **Commandes Informatiques** : Mat√©riel informatique
- **Commandes Bureau** : Mat√©riel de bureau
- **Gestion des Fournisseurs** : Catalogue, contacts, devis
- **Suivi des Livraisons** : Statuts, dates, r√©ceptions

### üë• Gestion des Utilisateurs
- **R√¥les et Permissions** : Employ√©, Gestionnaire, Super Admin
- **Profils Personnalis√©s** : Informations, √©quipements affect√©s
- **Authentification S√©curis√©e** : Login/logout, sessions

### ü§ñ Chatbot Intelligent
- **Assistant IA** : R√©ponses automatiques aux questions
- **Base de Connaissances** : Documentation int√©gr√©e
- **Recherche S√©mantique** : RAG (Retrieval-Augmented Generation)
- **Mod√®les Hugging Face** : sentence-transformers pour l'IA

### üìä Dashboard de Garanties
- **Interface Streamlit** : Dashboard interactif et moderne
- **Visualisations** : Graphiques et m√©triques en temps r√©el
- **Gestion des Garanties** : Suivi et alertes automatiques

## üèóÔ∏è Architecture Technique

### Solution Hybride Kubernetes + Docker

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    SOLUTION HYBRIDE                        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  KUBERNETES (Services principaux)                          ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Backend Django    : Port 8000                         ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ Frontend React    : Port 3000                         ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Streamlit Dashboard: Port 8501                        ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  DOCKER (Chatbot stable)                                   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ Chatbot AI       : Port 8001                          ‚îÇ
‚îÇ                                                             ‚îÇ
‚îÇ  BASE DE DONN√âES                                           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ PostgreSQL       : Port 5432 (partag√©e)              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Structure du Projet

```
ParcInfo/
‚îú‚îÄ‚îÄ apps/                           # Applications Django
‚îÇ   ‚îú‚îÄ‚îÄ users/                      # Gestion des utilisateurs
‚îÇ   ‚îú‚îÄ‚îÄ demande_equipement/         # Demandes d'√©quipement
‚îÇ   ‚îú‚îÄ‚îÄ materiel_informatique/      # Mat√©riel informatique
‚îÇ   ‚îú‚îÄ‚îÄ materiel_bureautique/       # Mat√©riel de bureau
‚îÇ   ‚îú‚îÄ‚îÄ commande_informatique/      # Commandes informatiques
‚îÇ   ‚îú‚îÄ‚îÄ commande_bureau/            # Commandes bureau
‚îÇ   ‚îú‚îÄ‚îÄ fournisseurs/               # Gestion des fournisseurs
‚îÇ   ‚îú‚îÄ‚îÄ livraison/                  # Suivi des livraisons
‚îÇ   ‚îî‚îÄ‚îÄ chatbot/                    # Assistant IA
‚îú‚îÄ‚îÄ dashboard_garantie/             # Dashboard Streamlit
‚îÇ   ‚îú‚îÄ‚îÄ dashboard_garantie.py       # Application principale
‚îÇ   ‚îî‚îÄ‚îÄ custom_styles.css           # Styles personnalis√©s
‚îú‚îÄ‚îÄ frontend/                       # Application React
‚îÇ   ‚îú‚îÄ‚îÄ components/                 # Composants React
‚îÇ   ‚îú‚îÄ‚îÄ contexts/                   # Contextes React
‚îÇ   ‚îî‚îÄ‚îÄ styles/                     # Styles CSS
‚îú‚îÄ‚îÄ k8s/                           # Configuration Kubernetes
‚îÇ   ‚îú‚îÄ‚îÄ backend.yaml               # D√©ploiement Backend
‚îÇ   ‚îú‚îÄ‚îÄ frontend.yaml              # D√©ploiement Frontend
‚îÇ   ‚îú‚îÄ‚îÄ streamlit.yaml             # D√©ploiement Streamlit
‚îÇ   ‚îú‚îÄ‚îÄ chatbot.yaml               # D√©ploiement Chatbot
‚îÇ   ‚îî‚îÄ‚îÄ configmap.yaml             # Configuration
‚îú‚îÄ‚îÄ ParcInfo/                      # Configuration Django
‚îú‚îÄ‚îÄ templates/                     # Templates HTML
‚îú‚îÄ‚îÄ static/                        # Fichiers statiques
‚îî‚îÄ‚îÄ media/                         # Fichiers upload√©s
```

## üöÄ Installation et Configuration

### Pr√©requis
- Python 3.8+
- Node.js 16+
- PostgreSQL
- Docker & Docker Compose
- Kubernetes (Docker Desktop ou Minikube)
- kubectl

### Installation Rapide

1. **Cloner le projet**
```bash
git clone https://github.com/houda-aitmouch/ParcInfo.git
cd ParcInfo
```

2. **D√©ploiement de la Solution Hybride**
```bash
# D√©ploiement automatique complet
./deploy_hybrid_solution.sh

# Ou d√©ploiement manuel
# 1. D√©marrer PostgreSQL
docker-compose up -d postgres

# 2. D√©marrer le chatbot Docker
docker-compose up -d chatbot

# 3. D√©ployer les services Kubernetes
kubectl apply -f k8s/
```

3. **V√©rification du d√©ploiement**
```bash
# V√©rifier les pods Kubernetes
kubectl get pods -n parcinfo

# V√©rifier les services Docker
docker-compose ps

# Tester l'application
./test_final_hybrid.py
```

## üåê URLs d'Acc√®s

### Services Kubernetes
- **Backend Django** : http://localhost:8000
- **Frontend React** : http://localhost:3000
- **Streamlit Dashboard** : http://localhost:8501

### Services Docker
- **Chatbot IA** : http://localhost:8001/chatbot/

### Acc√®s via Port-Forward
```bash
# Backend
kubectl port-forward -n parcinfo service/backend-service 8000:8000

# Frontend
kubectl port-forward -n parcinfo service/frontend-service 3000:3000

# Streamlit
kubectl port-forward -n parcinfo service/streamlit-service 8501:8501
```

## üîê Identifiants par D√©faut

### Super Utilisateur Django
- **Username** : superadmin
- **Email** : admin@parcinfo.com
- **Password** : admin123

### Utilisateurs de Test
- **Employ√©** : employe / employe123
- **Gestionnaire Info** : gestionnaire_info / gestionnaire123
- **Gestionnaire Bureau** : gestionnaire_bureau / gestionnaire123

## üß™ Tests et Validation

### Scripts de Test Disponibles
```bash
# Test complet de la solution hybride
python test_final_hybrid.py

# Test des workflows GitHub Actions
python test_github_actions.py

# Test de redirection Dashboard Garantie
python test_dashboard_redirect.py

# Test du chatbot
python test_final_docker_chatbot.py
```

### Tests GitHub Actions
- ‚úÖ Configuration Django valid√©e
- ‚úÖ Imports et d√©pendances v√©rifi√©s
- ‚úÖ Fichiers Docker et Kubernetes valid√©s
- ‚úÖ Tests sans base de donn√©es (SQLite en m√©moire)

## üê≥ Configuration Docker

### Images Docker
- `parcinfo-backend:latest` - Backend Django
- `parcinfo-chatbot:latest` - Chatbot IA avec mod√®les Hugging Face
- `parcinfo-frontend:latest` - Frontend React
- `parcinfo-streamlit:latest` - Dashboard Streamlit
- `postgres:15` - Base de donn√©es PostgreSQL

### Variables d'Environnement
```env
# Django
SECRET_KEY=votre-secret-key
DEBUG=True
ALLOWED_HOSTS=*

# Base de donn√©es
DB_HOST=host.docker.internal
DB_NAME=parcinfo_db
DB_USER=Houda
DB_PASSWORD=

# Chatbot IA
TRANSFORMERS_CACHE=/root/.cache/huggingface
HF_HOME=/root/.cache/huggingface
HF_DISABLE_PROGRESS_BARS=1
```

## ‚ò∏Ô∏è Configuration Kubernetes

### Namespace
```bash
kubectl create namespace parcinfo
```

### Services NodePort
- Backend : Port 30080
- Frontend : Port 30081
- Streamlit : Port 30085
- Chatbot : Port 30086

### Volumes Persistants
- Cache Hugging Face : `/Users/HouDa/PycharmProjects/docker_model_cache`
- Base de donn√©es : Volume PostgreSQL

## üîß Maintenance et Monitoring

### Logs
```bash
# Logs Kubernetes
kubectl logs -n parcinfo deployment/backend
kubectl logs -n parcinfo deployment/streamlit

# Logs Docker
docker-compose logs -f chatbot
```

### Red√©marrage des Services
```bash
# Red√©marrer un pod Kubernetes
kubectl rollout restart deployment/backend -n parcinfo

# Red√©marrer le chatbot Docker
docker-compose restart chatbot
```

### Sauvegarde
```bash
# Sauvegarder la base de donn√©es
docker-compose exec postgres pg_dump -U Houda parcinfo_db > backup.sql

# Sauvegarder le cache des mod√®les IA
tar -czf huggingface_cache_backup.tar.gz /Users/HouDa/PycharmProjects/docker_model_cache
```

## üéØ Fonctionnalit√©s Avanc√©es

### Dashboard de Garanties
- **Interface Streamlit** : Dashboard moderne et interactif
- **CSS Personnalis√©** : Styles adapt√©s au design
- **Redirection Automatique** : Depuis le backend Django
- **Authentification** : Int√©gration avec le syst√®me d'utilisateurs

### Chatbot Intelligent
- **Mod√®les Hugging Face** : sentence-transformers
- **Cache Persistant** : √âvite les t√©l√©chargements r√©p√©t√©s
- **API REST** : Int√©gration avec le frontend
- **Base de Connaissances** : Documentation du projet

### Gestion des D√©charges
- **PDF Automatiques** : G√©n√©ration avec logo et signatures
- **Signatures √âlectroniques** : Canvas HTML5
- **Archivage** : Stockage organis√© par date
- **Notifications** : Alertes automatiques

## üöÄ D√©ploiement en Production

### Script de D√©ploiement
```bash
# D√©ploiement complet
./deploy_hybrid_solution.sh

# V√©rification
kubectl get all -n parcinfo
docker-compose ps
```

### Monitoring
```bash
# Statut des services
kubectl get pods -n parcinfo -w
docker-compose ps

# Ressources utilis√©es
kubectl top pods -n parcinfo
docker stats
```

## üìä M√©triques et Performance

### Architecture Optimis√©e
- **Kubernetes** : Scalabilit√© et haute disponibilit√©
- **Docker** : Isolation et stabilit√© pour l'IA
- **PostgreSQL** : Performance et fiabilit√©
- **Cache Persistant** : Optimisation des mod√®les IA

### URLs de Test
- **Health Check Backend** : http://localhost:8000/health/
- **Health Check Chatbot** : http://localhost:8001/health/
- **Dashboard Garantie** : http://localhost:8501/?username=superadmin

## üõ†Ô∏è D√©veloppement

### Structure des Tests
```
tests/
‚îú‚îÄ‚îÄ test_github_actions.py      # Tests CI/CD
‚îú‚îÄ‚îÄ test_final_hybrid.py        # Tests complets
‚îú‚îÄ‚îÄ test_dashboard_redirect.py  # Tests redirection
‚îî‚îÄ‚îÄ test_final_docker_chatbot.py # Tests chatbot
```

### Workflow GitHub Actions
- Tests automatiques sur push/PR
- Validation des configurations Docker/Kubernetes
- Tests sans base de donn√©es (SQLite en m√©moire)
- V√©rification des imports et d√©pendances

## üìÑ Documentation

### Fichiers de Documentation
- `ACCES-SITE.md` - Guide d'acc√®s aux services
- `STATUT-ACCES.md` - Statut des services
- `corrections-k8s-finales.md` - Corrections Kubernetes
- `README-DOCKER.md` - Documentation Docker

## üéâ Pour votre Soutenance

### D√©monstration Live
1. **D√©marrage** : `./deploy_hybrid_solution.sh`
2. **Acc√®s** : http://localhost:8000 (Backend)
3. **Dashboard** : http://localhost:8501 (Streamlit)
4. **Chatbot** : http://localhost:8001/chatbot/
5. **Admin** : http://localhost:8000/admin/

### Points Techniques √† Pr√©senter
- ‚úÖ **Architecture Hybride** : Kubernetes + Docker
- ‚úÖ **IA Int√©gr√©e** : Chatbot avec Hugging Face
- ‚úÖ **Dashboard Moderne** : Streamlit avec CSS personnalis√©
- ‚úÖ **D√©charges Num√©riques** : PDF avec signatures
- ‚úÖ **Tests Automatis√©s** : GitHub Actions
- ‚úÖ **D√©ploiement** : Scripts automatis√©s

## üìû Support

- **Email** : support@parcinfo.com
- **GitHub** : https://github.com/houda-aitmouch/ParcInfo
- **Issues** : GitHub Issues pour les bugs
- **Documentation** : Fichiers .md du projet

## üìÑ Licence

Ce projet est sous licence MIT.

---

**üéâ ParcInfo - Solution hybride moderne pour la gestion intelligente de votre parc informatique !**

*D√©velopp√© avec ‚ù§Ô∏è en utilisant Django, React, Streamlit, Kubernetes et Docker*